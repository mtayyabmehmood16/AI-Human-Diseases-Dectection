@startuml Component Diagram

package "Client Layer" {
  [Web Browser] as WB
}

package "Application Layer" {
  component "Main Application (app.py)" as App
  
  package "Blueprints" {
    [Auth Blueprint] as AuthBP
    [Patients Blueprint] as PatBP
    [Main Blueprint] as MainBP
    [Admin Blueprint] as AdminBP
  }

  package "Services" {
    [Disease Matcher] as Matcher
    [AI Client (Gemini)] as AI
    [Risk Analyzer] as Risk
    [PDF Generator] as PDF
    [Voice Processor] as Voice
  }
}

package "Data Layer" {
  database "SQLite/Postgres" as DB
  file "Disease CSVs" as CSV
  file "Patient Images" as Images
  file "Interactions JSON" as JSON
}

cloud "External Services" {
  [Google Gemini API] as ExtAI
  [Google Speech API] as ExtSpeech
}

WB --> App : HTTP/HTTPS
App --> AuthBP
App --> PatBP
App --> MainBP
App --> AdminBP

MainBP --> Matcher : query symptoms
MainBP --> AI : chat/skin analysis
MainBP --> Voice : transcribe audio
PatBP --> Risk : analyze health
PatBP --> PDF : generate report
AdminBP --> DB : manage users

Matcher --> CSV : reads
Risk --> JSON : reads interactions
AI --> ExtAI : API calls
Voice --> ExtSpeech : API calls

AuthBP --> DB : Read/Write User
PatBP --> DB : Read/Write Patient
PatBP --> Images : Read/Write Photos

@enduml
